# レンダリング

## クリティカルレンダリングパス

HTMLのダウンロードからレンダリングまでの流れをクリティカルレンダリングパスという。

レンダリングまでの流れ
1. HTMLがダウンロードされる。
1. 以下が並列実行される。
   1. HTMLのタグを解析しDOMツリーを構築する。(これが完了したら、`DOMContentLoaded`発火)
   1. CSSを解析し、CSSOMツリーを構築する。
   1. タグを解析し必要に応じて(`<img src=url />`等を読み込んだタイミングで) 外部リソースがダウンロードされる。(HTTP1.1の場合は同時に6つまで)
   1. インラインスクリプトがある場合は実行される。(実行中はDOMツリーの構築をブロックする)
   #### Tips
   - CSSOMツリー構築、DOMツリー構築は並行して行われるが、JSの実行はCSSOMツリーの構築完了を待つ。
   - DOMツリーの構築はJSの実行が完了するまでブロックされる。
   - 外部リソースのJSがある場合も、ダウンロードが完了し実行されるまでDOMツリーの構築がブロックされる。
   - DOMツリー、CSSOMツリーの構築が完了したら次に進む。
1. レンダリングツリーの構築(DOMツリーとCSSOMツリーの合成)
1. レイアウト(リフロー)  デバイスのviewport内で個々の要素の位置、サイズを算出
1. ペイント  個々の要素を描画する
